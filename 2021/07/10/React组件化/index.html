<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>React组件化 | 大枫</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script",0,"ga"),ga("create","G-Z06B9NZ0K4","auto"),ga("send","pageview")</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?da39e67eca8f9b3743e259caf04feb96";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">React组件化</h1><a id="logo" href="/.">大枫</a><p class="description">Stay Hungry.Stay Foolish.</p></div><div id="nav-menu"> <a class="current" href="/."><i class="fa fa-home">首页</i></a> <a href="/archives/"><i class="fa fa-archive">归档</i></a> <a href="/about/"><i class="fa fa-user">关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">React组件化</h1><div class="post-meta">2021-07-10 <span>|</span> <span class="category"><a href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script> <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span> <span>阅读</span></span> <span class="post-time"><span class="post-meta-item-text">|</span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i> <span class="post-count">1.4k</span> <span class="post-meta-item-text">字</span></span></span> <span class="post-time">|<span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> <span class="post-count">6</span> <span class="post-meta-item-text">分钟</span></span></span></div><a class="disqus-comment-count" href="/2021/07/10/React%E7%BB%84%E4%BB%B6%E5%8C%96/#vcomment"><span class="valine-comment-count" data-xid="/2021/07/10/React%E7%BB%84%E4%BB%B6%E5%8C%96/"></span> <span>条评论</span></a><div class="post-content"><h3 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app xxx</span><br><span class="line">cd xxx</span><br><span class="line">yarn start</span><br></pre></td></tr></table></figure><h3 id="组件化优点"><a href="#组件化优点" class="headerlink" title="组件化优点"></a>组件化优点</h3><ol><li>增强代码重⽤性，提⾼开发效率</li><li>简化调试步骤，提升整个项⽬的可维护性</li><li>便于协同开发</li><li>注意点：降低耦合性</li></ol><h3 id="组件跨层级通信"><a href="#组件跨层级通信" class="headerlink" title="组件跨层级通信"></a>组件跨层级通信</h3><p><img src="/2021/07/10/React%E7%BB%84%E4%BB%B6%E5%8C%96/1.png"></p><p>在⼀个典型的 React 应⽤中，数据是通过 props 属性⾃上⽽下（由⽗及⼦）进⾏传递的，但这种做法对<br>于某些类型的属性⽽⾔是极其繁琐的（例如：地区偏好，UI 主题），这些属性是应⽤程序中许多组件都<br>需要的。Context 提供了⼀种在组件之间共享此类值的⽅式，⽽不必显式地通过组件树的逐层传递<br>props。</p><p>React 中使⽤ Context 实现祖代组件向后代组件跨层级传值。Vue 中的 provide &amp; inject 来源于 Context。</p><h4 id="Context-API"><a href="#Context-API" class="headerlink" title="Context API"></a>Context API</h4><h5 id="React-createContext"><a href="#React-createContext" class="headerlink" title="React.createContext"></a>React.createContext</h5><p>创建⼀个 Context 对象。当 React 渲染⼀个订阅了这个 Context 对象的组件，这个组件会从组件树中离<br>⾃身最近的那个匹配的 Provider 中读取到当前的 context 值。</p><h4 id="Context-Provider"><a href="#Context-Provider" class="headerlink" title="Context.Provider"></a>Context.Provider</h4><p>Provider 接收⼀个 value 属性，传递给消费组件，允许消费组件订阅 context 的变化。⼀个 Provider<br>可以和多个消费组件有对应关系。多个 Provider 也可以嵌套使⽤，⾥层的会覆盖外层的数据。</p><p>当 Provider 的 value 值发⽣变化时，它内部的所有消费组件都会重新渲染。Provider 及其内部<br>consumer 组件都不受制于 shouldComponentUpdate 函数，因此当 consumer 组件在其祖先组件退<br>出更新的情况下也能更新。</p><h5 id="Class-contextType"><a href="#Class-contextType" class="headerlink" title="Class.contextType"></a>Class.contextType</h5><p>挂载在 class 上的 contextType 属性会被重赋值为⼀个由 <code>React.createContext()</code> 创建的 Context<br>对象。这能让你使⽤ this.context 来消费最近 Context 上的那个值。你可以在任何⽣命周期中访问<br>到它，包括 render 函数中。==只能用在类组件当中，只能订阅单一 context==</p><h5 id="Context-Consumer"><a href="#Context-Consumer" class="headerlink" title="Context.Consumer"></a>Context.Consumer</h5><p>这⾥，React 组件也可以订阅到 context 变更。这能让你在函数式组件中完成订阅 context。<br>这个函数接收当前的 context 值，返回⼀个 React 节点。传递给函数的 value 值等同于往上组件树离<br>这个 context 最近的 Provider 提供的 value 值。如果没有对应的 Provider， value 参数等同于传递<br>给 createContext() 的 defaultValue 。</p><h5 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h5><p>接收⼀个 context 对象（ React.createContext 的返回值）并返回该 context 的当前值。当前的<br>context 值由上层组件中距离当前组件最近的 <code>&lt;MyContext.Provider&gt;</code> 的 value prop 决定。==只能⽤<br>在 function 组件中==</p><h4 id="使⽤-Context"><a href="#使⽤-Context" class="headerlink" title="使⽤ Context"></a>使⽤ Context</h4><p>创建 Context =&gt; 获取 Provider 和 Consumer =&gt; Provider 提供值 =&gt; Consumer 消费值<br>范例：共享主题⾊</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ContextTypePage <span class="keyword">from</span> <span class="string">&#x27;./ContextTypePage&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ThemeContext, UserContext &#125; <span class="keyword">from</span> <span class="string">&#x27;../Context&#x27;</span></span><br><span class="line"><span class="keyword">import</span> UseContextPage <span class="keyword">from</span> <span class="string">&#x27;./UseContextPage&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ConsumerPage <span class="keyword">from</span> <span class="string">&#x27;./ConsumerPage&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ContextPage</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      theme: &#123;</span><br><span class="line">        themeColor: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      user: &#123;</span><br><span class="line">        name: <span class="string">&#x27;xiaoming&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  changeColor = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; themeColor &#125; = <span class="built_in">this</span>.state.theme</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      theme: &#123;</span><br><span class="line">        themeColor: themeColor === <span class="string">&#x27;red&#x27;</span> ? <span class="string">&#x27;green&#x27;</span> : <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; theme, user &#125; = <span class="built_in">this</span>.state</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;ContextPage&lt;/h3&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="built_in">this</span>.changeColor&#125;&gt;change color&lt;/button&gt;</span><br><span class="line">        &lt;ThemeContext.Provider value=&#123;theme&#125;&gt;</span><br><span class="line">          &lt;ContextTypePage /&gt;</span><br><span class="line">          &lt;UserContext.Provider value=&#123;user&#125;&gt;</span><br><span class="line">            &lt;UseContextPage /&gt;</span><br><span class="line">            &lt;ConsumerPage /&gt;</span><br><span class="line">          &lt;/UserContext.Provider&gt;</span><br><span class="line">        &lt;/ThemeContext.Provider&gt;</span><br><span class="line">        &lt;ContextTypePage /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Context.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ThemeContext = React.createContext(&#123; <span class="attr">themeColor</span>: <span class="string">&#x27;pink&#x27;</span> &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> UserContext = React.createContext()</span><br></pre></td></tr></table></figure><p>pages/ContextTypePage.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ThemeContext &#125; <span class="keyword">from</span> <span class="string">&#x27;../Context&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ContextTypePage</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> contextType = ThemeContext</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; themeColor &#125; = <span class="built_in">this</span>.context</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;border&quot;</span>&gt;</span><br><span class="line">        &lt;h3 className=&#123;themeColor&#125;&gt;ContextTypePage&lt;/h3&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>pages/ConsumerPage.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ThemeContext, UserContext &#125; <span class="keyword">from</span> <span class="string">&#x27;../Context&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerPage</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;border&quot;</span>&gt;</span><br><span class="line">        &lt;ThemeContext.Consumer&gt;</span><br><span class="line">          &#123;<span class="function">(<span class="params">themeContext</span>) =&gt;</span> (</span><br><span class="line">            &lt;&gt;</span><br><span class="line">              &lt;h3 className=&#123;themeContext.themeColor&#125;&gt;ConsumerPage&lt;/h3&gt;</span><br><span class="line">              &lt;UserContext.Consumer&gt;</span><br><span class="line">                &#123;<span class="function">(<span class="params">userContext</span>) =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">HandleUserContext</span> &#123;<span class="attr">...userContext</span>&#125; /&gt;</span></span>&#125;</span><br><span class="line">              &lt;/UserContext.Consumer&gt;</span><br><span class="line">            &lt;/&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">        &lt;/ThemeContext.Consumer&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HandleUserContext</span>(<span class="params">userCtx</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;userCtx.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>消费多个 Context</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ThemeProvider</span> <span class="attr">value</span>=<span class="string">&quot;&#123;theme&#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ContextTypePage</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ConsumerPage</span> /&gt;</span></span><br><span class="line">  &#123;/*多个Context */&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">UserProvider</span> <span class="attr">value</span>=<span class="string">&quot;&#123;user&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">MultipleContextsPage</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">UserProvider</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果两个或者更多的 context 值经常被⼀起使⽤，那你可能要考虑⼀下另外创建你⾃⼰的渲染组件，以<br>提供这些值。</p><p>pages/UseContextPage</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect, useContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ThemeContext, UserContext &#125; <span class="keyword">from</span> <span class="string">&#x27;../Context&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">UseContextPage</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> themeContext = useContext(ThemeContext)</span><br><span class="line">  <span class="keyword">const</span> &#123; themeColor &#125; = themeContext</span><br><span class="line">  <span class="keyword">const</span> userContext = useContext(UserContext)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;border&quot;</span>&gt;</span><br><span class="line">      &lt;h3 className=&#123;themeColor&#125;&gt;UseContextPage&lt;/h3&gt;</span><br><span class="line">      &lt;p&gt;&#123;userContext.name&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><p>因为 context 会使⽤参考标识（reference identity）来决定何时进⾏渲染，这⾥可能会有⼀些陷阱，当<br>provider 的⽗组件进⾏重渲染时，可能会在 consumers 组件中触发意外的渲染。举个例⼦，当每⼀次<br>Provider 重渲染时，以下的代码会重渲染所有下⾯的 consumers 组件，因为 value 属性总是被赋值<br>为新的对象：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Provider value=&#123;&#123; <span class="attr">something</span>: <span class="string">&#x27;something&#x27;</span> &#125;&#125;&gt;</span><br><span class="line">        &lt;Toolbar /&gt;</span><br><span class="line">      &lt;/Provider&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>为了防⽌这种情况，将 value 状态提升到⽗节点的 state ⾥：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      value: &#123; <span class="attr">something</span>: <span class="string">&#x27;something&#x27;</span> &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Provider value=&#123;<span class="built_in">this</span>.state.value&#125;&gt;</span><br><span class="line">        &lt;Toolbar /&gt;</span><br><span class="line">      &lt;/Provider&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>在 React 的官⽅⽂档中， Context 被归类为⾼级部分(Advanced)，属于 React 的⾼级 API，建议不要滥<br>⽤。<br>后⾯我们要学习到的 react-redux 的<provider> ，就是通过 Context 提供⼀个全局态的 store ，路<br>由组件 react-router 通过 Context 管理路由状态等等。在 React 组件开发中，如果⽤好 Context ，可以<br>让你的组件变得强⼤，⽽且灵活。</provider></p></div><div id="donate"><link rel="stylesheet" type="text/css" href="/css/donate.css"><script type="text/javascript" src="/js/donate.js" successtext="复制成功!"></script><a class="pos-f tr3" id="github" target="_blank" rel="noopener" href="https://github.com/YongMaple" arget="_blank" title="Github"></a><div id="DonateText">Donate</div><ul class="list pos-f" id="donateBox"><li id="AliPay" qr="/img/AliPayQR.jpg"></li><li id="WeChat" qr="/img/WeChatQR.jpg"></li></ul><div class="pos-f left-100" id="QRBox"><div id="MainBox"></div></div></div><script type="text/javascript" src="/js/share.js?v=1.0.0" async></script><a class="article-share-link" data-url="https://yongmaple.com/2021/07/10/React%E7%BB%84%E4%BB%B6%E5%8C%96/" data-id="cksx9ebqc002xoilvefg3htj1" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACrUlEQVR42u3aQW7CQAwF0N7/0lTqqouSfNtjQOrLCgVI5g1SxnzP11d8PH6O5PXvM/n5Z8f1FY4deHh4eK2h5zd49pnrSUkm63pSmuPBw8PDW+Mlg7geVnWCqvfKJwUPDw/vc3gJY1KO98p6PDw8vM/nbZTLk0AEDw8P7128pCC+/lYS2uZLy7FwBA8PD2+Bd7YB9prXb+vv4eHh/Xveo3hUS+3kkZ1vESiPFg8PD2+BlxTHyW02zldji8I/Bjw8PLwBr9fmzx/uSdAwacLdfBIPDw9vjZesHnlg2mxTXb6bN9L++MeAh4eHd5SXXLTX4uplrb2RNPdH4OHh4Q14k01XeTFd3VJwbNsWHh4e3lFeNULtNbfyEKG6E+DmXTw8PLw1Xq947QWvpxaPaKnDw8PDW+b1St5qnHqq5RYtLXh4eHgLvGrZmocCk60D+aarcoGOh4eHN+blZXG12J0P8QASDw8P7yW8+VAmg843Y0VLDh4eHt4Cr9e8344tksA3r5nx8PDw9ng9ZLkpVWyMHVio8PDw8I7yktAhf0CfmpR8C9dNXIKHh4e3xqt2yfItU9W4odoeu/kuHh4e3gIvL3Cri0QeK5yNdwvpLx4eHt6Al4e5eWQwiXTzcrywpOHh4eEd5fUK6OSThQZ/XGQnUcXTkhoPDw9vzJu05HubAHoNs+oZPDw8vPfy5rFsfqykLHh4eHgLCWf1z3/16G0vyMvuaDrw8PDwDvF6A00ChQRWfZ5XJw4PDw9vgze5zUZ40WuPJT8GHh4e3lneZGtUNQHoTUqvDYaHh4e3zZvfZl7+rsTEeHh4eG/llZv3wXfzAr03Qjw8PLxP4CUP7smU5deJphIPDw9vjVdt/PdC2HzrQJX09Ap4eHh4C7x58TopjieR8YFNA3h4eHg13jc2i8U6KfLdvgAAAABJRU5ErkJggg==">分享</a><div class="tags"><a href="/tags/React/"><i class="fa fa-tag"></i>React</a><a href="/tags/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/"><i class="fa fa-tag"></i>手撕源码</a></div><div class="post-nav"><a class="pre" href="/2021/08/29/pod%20install%E6%8A%A5%E9%94%99/">install报错</a><a class="next" href="/2021/05/31/Vue3%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%B8%89/">Vue3源码解析三</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify=!1,verify=!1,GUEST_INFO=["nick","mail","link"],guest_info="nick,mail,link".split(",").filter(function(i){return-1<GUEST_INFO.indexOf(i)});guest_info=0==guest_info.length?GUEST_INFO:guest_info,window.valine=new Valine({el:"#vcomment",notify:notify,verify:verify,appId:"I3xP7RQ9tkxTDanFl9uqQVz5-gzGzoHsz",appKey:"ES3vn5QS7Nr60OgnmwKqCkv9",placeholder:"写点什么吧",avatar:"retro",guest_info:guest_info,pageSize:"10"})</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"><input type="hidden" name="si" value="https://yongmaple.com"><input name="tn" type="hidden" value="bds"><input name="cl" type="hidden" value="3"><input name="ct" type="hidden" value="2097152"><input name="s" type="hidden" value="on"></form></div><div class="widget"><div class="widget-title"> <i class="fa fa-folder-o">分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E4%BB%96/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%80%9D%E7%BB%B4/">思维</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%A5%E9%94%99/">报错</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%B0%E5%BF%86/">记忆</a></li></ul></div><div class="widget"><div class="widget-title"> <i class="fa fa-star-o">标签</i></div><div class="tagcloud"><a href="/tags/%E8%AE%B0%E5%BF%86%E5%AE%AB%E6%AE%BF/" style="font-size:15px">记忆宫殿</a> <a href="/tags/AntD/" style="font-size:15px">AntD</a> <a href="/tags/AntV/" style="font-size:15px">AntV</a> <a href="/tags/L7/" style="font-size:15px">L7</a> <a href="/tags/Atom/" style="font-size:15px">Atom</a> <a href="/tags/eslint/" style="font-size:15px">eslint</a> <a href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" style="font-size:15px">开发工具</a> <a href="/tags/%E9%85%8D%E7%BD%AE/" style="font-size:15px">配置</a> <a href="/tags/css/" style="font-size:15px">css</a> <a href="/tags/Oh-My-ZSH/" style="font-size:15px">Oh-My-ZSH</a> <a href="/tags/CentOS/" style="font-size:15px">CentOS</a> <a href="/tags/egg-js/" style="font-size:15px">egg.js</a> <a href="/tags/redis/" style="font-size:15px">redis</a> <a href="/tags/Cesium/" style="font-size:15px">Cesium</a> <a href="/tags/%E6%8A%A5%E9%94%99/" style="font-size:15px">报错</a> <a href="/tags/ES6/" style="font-size:15px">ES6</a> <a href="/tags/ESlint/" style="font-size:15px">ESlint</a> <a href="/tags/title/" style="font-size:15px">title</a> <a href="/tags/ios/" style="font-size:15px">ios</a> <a href="/tags/%E6%89%8B%E6%9C%BA%E7%AB%AF/" style="font-size:15px">手机端</a> <a href="/tags/JavaScript/" style="font-size:15px">JavaScript</a> <a href="/tags/JS/" style="font-size:15px">JS</a> <a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size:15px">基础</a> <a href="/tags/%E8%BD%AC%E6%8D%A2/" style="font-size:15px">转换</a> <a href="/tags/%E5%8F%82%E6%95%B0/" style="font-size:15px">参数</a> <a href="/tags/forEach/" style="font-size:15px">forEach</a> <a href="/tags/map/" style="font-size:15px">map</a> <a href="/tags/includes/" style="font-size:15px">includes</a> <a href="/tags/indexOf/" style="font-size:15px">indexOf</a> <a href="/tags/%E6%95%B0%E7%BB%84/" style="font-size:15px">数组</a> <a href="/tags/%E6%8B%BC%E6%8E%A5/" style="font-size:15px">拼接</a> <a href="/tags/match/" style="font-size:15px">match</a> <a href="/tags/exec/" style="font-size:15px">exec</a> <a href="/tags/%E6%AD%A3%E5%88%99/" style="font-size:15px">正则</a> <a href="/tags/sort/" style="font-size:15px">sort</a> <a href="/tags/%E6%AF%94%E8%BE%83/" style="font-size:15px">比较</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size:15px">前端</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size:15px">排序</a> <a href="/tags/React/" style="font-size:15px">React</a> <a href="/tags/%E6%BA%90%E4%BB%A3%E7%A0%81%E6%9F%A5%E7%9C%8B/" style="font-size:15px">源代码查看</a> <a href="/tags/nodejs/" style="font-size:15px">nodejs</a> <a href="/tags/Mac/" style="font-size:15px">Mac</a> <a href="/tags/%E8%BE%93%E5%85%A5%E6%B3%95/" style="font-size:15px">输入法</a> <a href="/tags/nextTick/" style="font-size:15px">nextTick</a> <a href="/tags/hooks/" style="font-size:15px">hooks</a> <a href="/tags/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/" style="font-size:15px">手撕源码</a> <a href="/tags/Menu/" style="font-size:15px">Menu</a> <a href="/tags/%E9%80%82%E9%85%8D/" style="font-size:15px">适配</a> <a href="/tags/Retina/" style="font-size:15px">Retina</a> <a href="/tags/Vim/" style="font-size:15px">Vim</a> <a href="/tags/Vite/" style="font-size:15px">Vite</a> <a href="/tags/Vue/" style="font-size:15px">Vue</a> <a href="/tags/Vue3/" style="font-size:15px">Vue3</a> <a href="/tags/websocket/" style="font-size:15px">websocket</a> <a href="/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/" style="font-size:15px">组件化</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size:15px">面试</a> <a href="/tags/mysql/" style="font-size:15px">mysql</a> <a href="/tags/navicat/" style="font-size:15px">navicat</a> <a href="/tags/iOS/" style="font-size:15px">iOS</a> <a href="/tags/iTerm2/" style="font-size:15px">iTerm2</a> <a href="/tags/indexedDB/" style="font-size:15px">indexedDB</a> <a href="/tags/%E9%94%AE%E7%9B%98/" style="font-size:15px">键盘</a> <a href="/tags/this/" style="font-size:15px">this</a> <a href="/tags/vscode/" style="font-size:15px">vscode</a> <a href="/tags/vue-router/" style="font-size:15px">vue-router</a> <a href="/tags/webpack/" style="font-size:15px">webpack</a> <a href="/tags/host/" style="font-size:15px">host</a> <a href="/tags/%E7%AC%94%E8%AF%95/" style="font-size:15px">笔试</a> <a href="/tags/MongoDB/" style="font-size:15px">MongoDB</a> <a href="/tags/android%E6%A8%A1%E6%8B%9F%E5%99%A8/" style="font-size:15px">android模拟器</a> <a href="/tags/webview/" style="font-size:15px">webview</a> <a href="/tags/Chrome/" style="font-size:15px">Chrome</a> <a href="/tags/%E8%B0%83%E8%AF%95/" style="font-size:15px">调试</a> <a href="/tags/%E5%8E%BB%E9%87%8D/" style="font-size:15px">去重</a> <a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size:15px">微信</a> <a href="/tags/translate3d/" style="font-size:15px">translate3d</a> <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D/" style="font-size:15px">移动端适配</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size:15px">算法</a> <a href="/tags/%E7%BF%BB%E8%AF%91/" style="font-size:15px">翻译</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size:15px">设计模式</a> <a href="/tags/mongodb/" style="font-size:15px">mongodb</a> <a href="/tags/mongoose/" style="font-size:15px">mongoose</a> <a href="/tags/vuex/" style="font-size:15px">vuex</a></div></div><div class="widget"><div class="widget-title"> <i class="fa fa-file-o">最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/08/29/CocoaPods%E6%8D%A2%E6%BA%90/">CocoaPods换源</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/29/pod%20install%E6%8A%A5%E9%94%99/">install报错</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/10/React%E7%BB%84%E4%BB%B6%E5%8C%96/">React组件化</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/05/31/Vue3%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%B8%89/">Vue3源码解析三</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/05/31/Vue3%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%BA%8C/">Vue3源码解析二</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/05/26/Vue3%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">Vue3源码解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/05/24/indexedDB%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/">indexedDB中遇到的问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/05/21/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AF%95%E9%A2%98%E9%9B%86%E5%90%88/">前端笔试题集合</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/05/20/Vue%E9%A1%B9%E7%9B%AE%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">Vue项目最佳实践</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/05/18/Vue%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91/">Vue组件化开发</a></li></ul></div><div class="widget"><div class="widget-title"> <i class="fa fa-external-link">友情链接</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">大枫.</a> <a rel="nofollow" target="_blank" href="https://hexo.io">驱动 Hexo.</a> <a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo">主题 maupassant.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>