<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Vue2源码解析 | 大枫</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script",0,"ga"),ga("create","G-Z06B9NZ0K4","auto"),ga("send","pageview")</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?da39e67eca8f9b3743e259caf04feb96";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Vue2源码解析</h1><a id="logo" href="/.">大枫</a><p class="description">Stay Hungry.Stay Foolish.</p></div><div id="nav-menu"> <a class="current" href="/."><i class="fa fa-home">首页</i></a> <a href="/archives/"><i class="fa fa-archive">归档</i></a> <a href="/about/"><i class="fa fa-user">关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Vue2源码解析</h1><div class="post-meta">2021-04-13 <span>|</span> <span class="category"><a href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script> <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span> <span>阅读</span></span> <span class="post-time"><span class="post-meta-item-text">|</span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i> <span class="post-count">2.5k</span> <span class="post-meta-item-text">字</span></span></span> <span class="post-time">|<span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> <span class="post-count">10</span> <span class="post-meta-item-text">分钟</span></span></span></div><a class="disqus-comment-count" href="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#vcomment"><span class="valine-comment-count" data-xid="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"></span> <span>条评论</span></a><div class="post-content"><p>目录：</p><ul><li><a href="https://yongmaple.com/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">Vue2 源码解析</a></li><li><a href="https://yongmaple.com/2021/04/15/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%BA%8C/">Vue2 源码解析二</a></li><li><a href="https://yongmaple.com/2021/04/21/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%B8%89/">Vue2 源码解析三</a></li></ul><p>本文项目地址：<a target="_blank" rel="noopener" href="https://github.com/YongMaple/vue">https://github.com/YongMaple/vue</a> 内含测试用代码<code>/examples/test/</code></p><h3 id="获取-Vue"><a href="#获取-Vue" class="headerlink" title="获取 Vue"></a>获取 Vue</h3><p>项目地址：<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue">https://github.com/vuejs/vue</a></p><p>当前版本号：2.6.12</p><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i</span><br><span class="line">npm i roll-up -g</span><br></pre></td></tr></table></figure><p>使用<code>npm run dev</code>就会在<code>dist</code>目录下生成编译后的<code>vue.js</code></p><h3 id="文件结构"><a href="#文件结构" class="headerlink" title="文件结构"></a>文件结构</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── <span class="keyword">BACKERS.md</span></span><br><span class="line"><span class="keyword">├── </span>LICENSE</span><br><span class="line">├── README.md</span><br><span class="line">├── <span class="keyword">benchmarks</span></span><br><span class="line"><span class="keyword">├── </span><span class="keyword">dist </span>         发布目录</span><br><span class="line">├── examples      范例，里面有测试代码</span><br><span class="line">├── flow          针对flow的类型声明（类似ts）</span><br><span class="line">├── package.<span class="keyword">json</span></span><br><span class="line"><span class="keyword">├── </span>packages      核心代码之外的独立库</span><br><span class="line">├── <span class="keyword">scripts </span>      构建脚本</span><br><span class="line">├── src           源码</span><br><span class="line">│   ├── compiler          编译器相关（渲染函数、SFC的编译器、dom编译器）</span><br><span class="line">│   ├── core              核心代码</span><br><span class="line">│   │   ├── components      通用组件如keep-alive</span><br><span class="line">│   │   ├── <span class="built_in">config</span>.<span class="keyword">js</span></span><br><span class="line"><span class="keyword">│ </span>  │   ├── global-api      全局API</span><br><span class="line">│   │   ├── index.<span class="keyword">js</span></span><br><span class="line"><span class="keyword">│ </span>  │   ├── <span class="keyword">instance </span>       构造函数等</span><br><span class="line">│   │   ├── observer        响应式相关</span><br><span class="line">│   │   ├── util</span><br><span class="line">│   │   └── vdom            虚拟DOM相关</span><br><span class="line">│   ├── platforms           平台</span><br><span class="line">│   │   ├── web</span><br><span class="line">│   │   └── weex            基本凉凉了</span><br><span class="line">│   ├── server</span><br><span class="line">│   ├── sfc</span><br><span class="line">│   └── <span class="keyword">shared</span></span><br><span class="line"><span class="keyword">├── </span>types         ts类型声明</span><br><span class="line">└── yarn.lock</span><br></pre></td></tr></table></figure><p>需要源码映射，所以在 package.json 中添加<code>--sourcemap</code></p><p><code>&quot;dev&quot;: &quot;rollup -w -c scripts/config.js --sourcemap --environment TARGET:web-full-dev&quot;,</code></p><p>术语解释：</p><ul><li>runtime: 仅包含运行时，不包含编译器</li><li>common: cjs 规范，用于 webpack1</li><li>esm: ES 模块，用于 webpack2+</li><li>umd: universal module definition，兼容 cjs 和 amd，常见直接用在浏览器</li></ul><p>例：</p><ul><li><code>/dist/vue.common.js</code> 中间加 common 的，给服务端使用的，在 nodejs 环境执行的</li><li><code>/dist/vue.esm.browser.js</code> esm，给打包工具使用的，如 webpack。</li><li>browser，给支持 type=module 这种模块化方式导入的浏览器</li><li><code>/dist/vue.js</code> global，同时兼容 amd 和 cjs(commonjs)的格式。umd 的打包方式</li><li><code>/dist/vue.runtime.js</code> runtime，运行时，不含编译器，template 中加入字符串模板这类操作会报错</li></ul><h3 id="src-platforms-web-entry-runtime-with-compiler-js"><a href="#src-platforms-web-entry-runtime-with-compiler-js" class="headerlink" title="src/platforms/web/entry-runtime-with-compiler.js"></a><code>src/platforms/web/entry-runtime-with-compiler.js</code></h3><p>从 package.json <code>dev</code>中找到<code>/scripts/config.js</code></p><p><code>rollup -w -c scripts/config.js --sourcemap --environment TARGET:web-full-dev</code>命令中传入了环境变量<code>web-full-dev</code></p><p>在<code>/scripts/config.js</code>中查找，可以在配置中找到入口文件<code>web/entry-runtime-with-compiler.js</code></p><p>文件地址前有个 resolve 方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> resolve = <span class="function">(<span class="params">p</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 拆分/</span></span><br><span class="line">  <span class="comment">// web/entry-runtime-with-compiler.js</span></span><br><span class="line">  <span class="keyword">const</span> base = p.split(<span class="string">&#x27;/&#x27;</span>)[<span class="number">0</span>] <span class="comment">// web</span></span><br><span class="line">  <span class="keyword">if</span> (aliases[base]) &#123;</span><br><span class="line">    <span class="keyword">return</span> path.resolve(aliases[base], p.slice(base.length + <span class="number">1</span>))</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> path.resolve(__dirname, <span class="string">&#x27;../&#x27;</span>, p)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以下是<code>aliases</code>的内容</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> resolve = <span class="function">(<span class="params">p</span>) =&gt;</span> path.resolve(__dirname, <span class="string">&#x27;../&#x27;</span>, p)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  vue: resolve(<span class="string">&#x27;src/platforms/web/entry-runtime-with-compiler&#x27;</span>),</span><br><span class="line">  compiler: resolve(<span class="string">&#x27;src/compiler&#x27;</span>),</span><br><span class="line">  core: resolve(<span class="string">&#x27;src/core&#x27;</span>),</span><br><span class="line">  shared: resolve(<span class="string">&#x27;src/shared&#x27;</span>),</span><br><span class="line">  web: resolve(<span class="string">&#x27;src/platforms/web&#x27;</span>),</span><br><span class="line">  weex: resolve(<span class="string">&#x27;src/platforms/weex&#x27;</span>),</span><br><span class="line">  server: resolve(<span class="string">&#x27;src/server&#x27;</span>),</span><br><span class="line">  sfc: resolve(<span class="string">&#x27;src/sfc&#x27;</span>),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在找到了入口文件的位置<code>src/platforms/web/entry-runtime-with-compiler.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mount = Vue.prototype.$mount</span><br><span class="line">Vue.prototype.$mount = <span class="function"><span class="keyword">function</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  ...</span></span></span><br><span class="line"><span class="function"><span class="params">&#125;</span></span></span><br></pre></td></tr></table></figure><p>源码中这段是为了扩展$mount，为了解析 el、template 选项</p><p>问题 1：为什么可以不用写<code>$mount</code></p><p>答：如果设置了 el，挂载的宿主就指定为 el</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="comment">// template: &#x27;&lt;div&gt;template&lt;/div&gt;</span></span><br><span class="line">  template: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params">h</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> h(<span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;render&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>问题 2：el、template、render 同时出现，哪个优先级高</p><p>答：render &gt; template &gt; el</p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/1.png" alt="注意看注释"></p><h3 id="src-platforms-web-runtime-index-js"><a href="#src-platforms-web-runtime-index-js" class="headerlink" title="src/platforms/web/runtime/index.js"></a><code>src/platforms/web/runtime/index.js</code></h3><p>找到当前文件中的 Vue 引入<code>import Vue from &#39;./runtime/index&#39;</code></p><p>进入这个文件看一下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// install platform patch function</span></span><br><span class="line"><span class="comment">// 安装平台特有的补丁函数，未来用于组件更新</span></span><br><span class="line">Vue.prototype.__patch__ = inBrowser ? patch : noop</span><br><span class="line"></span><br><span class="line"><span class="comment">// public mount method</span></span><br><span class="line"><span class="comment">// 实现了$mount</span></span><br><span class="line">Vue.prototype.$mount = <span class="function"><span class="keyword">function</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  el?: string | Element,</span></span></span><br><span class="line"><span class="function"><span class="params">  hydrating?: boolean</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">Component</span> </span>&#123;</span><br><span class="line">  el = el &amp;&amp; inBrowser ? query(el) : <span class="literal">undefined</span></span><br><span class="line">  <span class="comment">// 挂载组件：把当前组件(this)挂载到el上</span></span><br><span class="line">  <span class="comment">// 流程： mountComponent 执行this的render， 得到vnode， _update(vnode)转换成真实dom， _update内部调用的是__patch__</span></span><br><span class="line">  <span class="keyword">return</span> mountComponent(<span class="built_in">this</span>, el, hydrating)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>Vue 在执行挂载时：执行渲染函数得到虚拟 dom，再执行更新函数，将其转换为真实 dom</em></p><p>继续找 Vue，当前文件的引入为<code>import Vue from &#39;core/index&#39;</code></p><p>此处 core 是<code>src/core</code>的别名</p><h3 id="src-core-index-js"><a href="#src-core-index-js" class="headerlink" title="src/core/index.js"></a><code>src/core/index.js</code></h3><p>主要做了初始化全局 API</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化全局API</span></span><br><span class="line"><span class="comment">// Vue.use directive components mixin 等</span></span><br><span class="line">initGlobalAPI(Vue)</span><br></pre></td></tr></table></figure><p>继续找 Vue，当前文件的引入为<code>import Vue from &#39;./instance/index&#39;</code></p><h3 id="src-core-instance-index-js"><a href="#src-core-instance-index-js" class="headerlink" title="src/core/instance/index.js"></a><code>src/core/instance/index.js</code></h3><p>这个文件中</p><ul><li>声明了 Vue 的构造函数</li><li>声明了 Vue 的各种实例方法($set、$watch 等等)</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明Vue的构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Vue</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span> &amp;&amp; !(<span class="built_in">this</span> <span class="keyword">instanceof</span> Vue)) &#123;</span><br><span class="line">    warn(<span class="string">&#x27;Vue is a constructor and should be called with the `new` keyword&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">this</span>._init(options)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明Vue各种实例方法</span></span><br><span class="line">initMixin(Vue)</span><br><span class="line">stateMixin(Vue)</span><br><span class="line">eventsMixin(Vue)</span><br><span class="line">lifecycleMixin(Vue)</span><br><span class="line">renderMixin(Vue)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Vue</span><br></pre></td></tr></table></figure><p>这里<code>_init</code>从何而来，是在<code>initMixin()</code>中</p><h3 id="src-core-instance-init-js"><a href="#src-core-instance-init-js" class="headerlink" title="src/core/instance/init.js"></a><code>src/core/instance/init.js</code></h3><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/2.png" alt="注意注释"></p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/5.png" alt="initLifecycle"></p><p>内部就是声明了各种和他有关系的组件，父、祖、子等</p><p>就是实例属性的初始化</p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/3.png" alt="initEvents"></p><p>在使用自定义事件时，类似这种写法<code>&lt;Child @my-click=&quot;onClick&quot;&gt;&lt;/Child&gt;</code></p><p>回调函数（onClick）在父组件中声明的，所以用在 initEvents 中使用<code>_parentListeners</code></p><p><code>updateComponentListeners</code>是事件的监听</p><p>事件的监听和派发都是组件本身</p><p>例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">child.$emit(<span class="string">&#x27;my-click&#x27;</span>)</span><br><span class="line">child.$on(<span class="string">&#x27;my-click&#x27;</span>, listeners)</span><br></pre></td></tr></table></figure><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/4.png" alt="initRender"></p><p>在 render 中处理<code>$slots</code>和<code>$scopedSlots</code>这个比较好理解，在渲染前肯定是要把内部插槽先解析</p><p><code>$_c</code>和<code>$createElement</code>就是 render(h)中的那个 h，可以得到虚拟 dom</p><p><code>$_c</code>给编译器生成的渲染函数去使用</p><p><code>$createElement</code>给用户生成的渲染函数去使用</p><p>问：new Vue 的时候都发生了什么？</p><p>答：首先构造函数的初始化会得到一个 Vue 的实例，我们给他传入 options，我们会得到一个组件实例，在内部会做根实例的初始化</p><ol><li>初始化时会做：当前实例的关键属性初始化，例如$parent,$root,$slots,$scopeSlots 等等</li><li>同时对当前自定义组件的自定义事件的监听</li><li>派发一些生命周期钩子，beforeCreate、created</li><li>在这两个钩子中间，对组件的状态进行初始化，比如 data/props/methods/computed/watch，对他们进行数据响应式处理</li></ol><h3 id="数据响应式"><a href="#数据响应式" class="headerlink" title="数据响应式"></a>数据响应式</h3><p>可以先看下之前的这篇文章进行大致的了解</p><p><a href="https://yongmaple.com/2021/04/07/%E6%89%8B%E5%86%99Vue/">https://yongmaple.com/2021/04/07/手写 Vue/</a></p><p>开始研究<code>initState</code></p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/6.png" alt="initState"><br>可以看到 initState 里面，对 props、methods、data、computed、watch 进行了初始化</p><p>问：props、methods、data 中如果有重名的属性，优先谁？</p><p>答：props &gt; methods &gt; data。从上往下处理，在处理时如果发现有重名的，就会报错</p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/7.png" alt="initData"></p><p>通常 data 都是 function，只有在根组件的时候可以是对象</p><p>问：为什么这里的 data 可以是对象？为什么 data 一般都是个函数，需要 return 出去，不能直接写对象？</p><ul><li>组件复用时所有组件实例都会共享 data，如果 data 是对象的话，就会造成一个组件修改 data 以后会影响到其他所有组件，所以需要将 data 写成函数，每次用到就调用一次函数获得新的数据。</li><li>当我们使用 new Vue() 的方式的时候，无论我们将 data 设置为对象还是函数都是可以的，因为 new Vue() 的方式是生成一个根组件，该组件不会复用，也就不存在共享 data 的情况了</li></ul><p>这里进入<code>observe</code>方法（<code>src/core/observer/index.js</code>）</p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/8.png" alt="observe"></p><p>可以知道，在 observe 时，每个对象会创建一个 Observer</p><p>先看测试代码<code>examples/test/02-1-reactive.html</code>中的问题</p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/9.png" alt="02-1-reactive.html"></p><p>再看下<code>src/core/observer/index.js</code></p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/10.png" alt="Observer"></p><p>再看上面的问题，这个例子中有几个 Dep，现在就知道应该是 4 个了</p><p>每个对象创建一个 Dep，每个属性又会创建一个子 Dep，所以这里是 4 个 Dep</p><p>一个组件一个 Watcher，这个例子中只有一个 new Vue()，所以这里是 1 个 Watcher</p><p>进入 Observer 中的 this.walk</p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/11.png" alt="walk"></p><p>这里 walk 遍历了对象的所有 key，进行了一个响应式的处理</p><p>进入 defineReactive</p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/12.png" alt="defineReactive"></p><p>这里每个 key 都 new Dep()</p><p>还可以看到<code>let childOb = !shallow &amp;&amp; observe(val)</code></p><p>这里又对属性做了一次 observe</p><p>如果这里 childOb 存在，就说明子 Ob 内部的 dep 和当前组件的 watcher 建立了依赖关系</p><p>Dep 与 Watcher 的关系</p><ul><li>一个组件内部只有一个 Watcher</li><li>一个组件内部有多个 Dep</li><li>组件内部除了 render watcher，可能还会有 user watcher，用户会自定义($watch、watch:{})</li><li>所以他们之间是多对多的关系</li></ul><p>先看下 depend</p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/13.png" alt="depend"></p><p>这里面 Dep.target 就是 WatcheraddDep</p><p>再看下 Watcher 的 addDep</p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/14.png" alt="addDep"></p><p>这里面把 watcher 和 dep 相互建立了关系</p><ul><li><p>建立 Dep 与 Watcher 的关系是为了通知更新，这个很好理解</p></li><li><p>建立 Watcher 与 Dep 的关系是为了清除 watcher 时使用</p></li></ul><p>如何清除 watcher？</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unWatch = app.$watch(<span class="string">&#x27;text&#x27;</span>, <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;newVal&#125;</span> : <span class="subst">$&#123;oldVal&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 手动注销watch</span></span><br><span class="line">unWatch()</span><br></pre></td></tr></table></figure><h3 id="数组响应式"><a href="#数组响应式" class="headerlink" title="数组响应式"></a>数组响应式</h3><p>数组和对象不同，操作数组时使用 7 个方法（数组变更方法），没办法得知数据变化，vue 中采取的策略是拦截这些方法并通知 dep</p><p>先看对数组的拦截和通知 <code>src/core/observer/array.js</code></p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/15.png" alt="array.js"></p><p>再找<code>arrayMethods</code>在哪使用的</p><p>Observer 中有对数组和对象分别做处理</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// 根据Object或者Array做不同的操作</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(value)) &#123;</span><br><span class="line">      <span class="comment">// 判断是否有原型</span></span><br><span class="line">      <span class="keyword">if</span> (hasProto) &#123;</span><br><span class="line">        protoAugment(value, arrayMethods)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// IE等老版本浏览器</span></span><br><span class="line">        copyAugment(value, arrayMethods, arrayKeys)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">this</span>.observeArray(value)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.walk(value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>有原型时，直接替换掉原型</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">protoAugment</span>(<span class="params">target, src: <span class="built_in">Object</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">/* eslint-disable no-proto */</span></span><br><span class="line">  <span class="comment">// 覆盖当前数组实例的原型</span></span><br><span class="line">  target.__proto__ = src</span><br><span class="line">  <span class="comment">/* eslint-enable no-proto */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>没有原型时，直接把方法定义上去</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copyAugment</span>(<span class="params">target: <span class="built_in">Object</span>, src: <span class="built_in">Object</span>, keys: <span class="built_in">Array</span>&lt;string&gt;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = keys.length; i &lt; l; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> key = keys[i]</span><br><span class="line">    def(target, key, src[key])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="set，del，watch"><a href="#set，del，watch" class="headerlink" title="set，del，watch"></a>set，del，watch</h3><p>set 所在位置<code>src/core/observer/index.js</code></p><p><em>图中删了两个:any，不然颜色有问题……</em></p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/17.png" alt="set"></p><p>del 就在 set 的下面，比较简单，只是删除后通知了一下</p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/18.png" alt="del"></p><p>watch 所在位置<code>src/core/instance/state.js</code></p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/19.png" alt="$watch"></p><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/20.png" alt="createWatcher"></p><h3 id="思维导图"><a href="#思维导图" class="headerlink" title="思维导图"></a>思维导图</h3><p><img src="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/16.png"></p><p><strong>本文完</strong></p></div><div id="donate"><link rel="stylesheet" type="text/css" href="/css/donate.css"><script type="text/javascript" src="/js/donate.js" successtext="复制成功!"></script><a class="pos-f tr3" id="github" target="_blank" rel="noopener" href="https://github.com/YongMaple" arget="_blank" title="Github"></a><div id="DonateText">Donate</div><ul class="list pos-f" id="donateBox"><li id="AliPay" qr="/img/AliPayQR.jpg"></li><li id="WeChat" qr="/img/WeChatQR.jpg"></li></ul><div class="pos-f left-100" id="QRBox"><div id="MainBox"></div></div></div><script type="text/javascript" src="/js/share.js?v=1.0.0" async></script><a class="article-share-link" data-url="https://yongmaple.com/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" data-id="cknslm1xi005w57yleomtbcik" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACvklEQVR42u3awW7bQAwE0Pz/T6dATwVS2zPkrmsUTychkOx9MqBlhvz6io/v38fP80dX/nnkd+Xnhw88PDy80dIfHY++5tE1+Sf8vCtZVb5mPDw8vNu82WbQPoLNN7brwcPDw/sE3vMrn1+fgPHw8PD+P16CnxW+bRiBh4eH9wm82T//pwKFGfVw1oKHh4cX8zYNsH91/qb+Hh4eHl7ZVW9L4bwQz6OHzYGHh4d3g5dEtO220S4uj4nzwPdFxoyHh4e34LWNqDawaD8h+TXyZhseHh7eDd5sJ5mFp+1LP29xFSk1Hh4e3gVevvTkEczq29lQwirMxcPDw4t5SZA6G6vaR7f5g3gR4OLh4eFd4LUhbA5uH2I7CfBiF8DDw8O7xsvbYG0MsYkqZk2vF/seHh4e3po3CyY2w1JtAX1qU8HDw8M7xWuj29kwwep5x9vGi6EBPDw8vEO8vHg9Oxo1GwsYrhYPDw/vKO/517TsNmbdDArUWQseHh7eUd5mFCCH5e20zagWHh4e3nt4SaF8qumVFMebwOJFSY2Hh4e35rVt+3bR7Su+bapFAxB4eHh4R3k3GldJgT57THkb7OKIBR4eHl7ZcMrD1jbsaIPdaMgADw8P7y282bTS/kWfnNcRCR4eHt4FXhsBJCHCKheJH/SBXxIPDw9vzcvbV8MC91oOXTTM8PDw8A7x9oVvOyIwe8UPBxfw8PDw3shrg4A8kmjvmjXe8PDw8G7wvstjs9y2gG7/XnwNHh4e3oI3e+0msUJ+1yx02IwX4OHh4e15s83geQSQD1rl4Wy+YfzlPwY8PDy8C7xZ52gzevV8U2k3rXqyDA8PD++NvFmZm2wneUH//DPx8PDwPoeXN/vzEDZvlT0vvg9sDHh4eHgXcs7idXx0aKCNLfDw8PBu8zYTW8mLu13WqREEPDw8vAu8X6ZDac7y2yrjAAAAAElFTkSuQmCC">分享</a><div class="tags"><a href="/tags/Vue/"><i class="fa fa-tag"></i>Vue</a><a href="/tags/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/"><i class="fa fa-tag"></i>手撕源码</a></div><div class="post-nav"><a class="pre" href="/2021/04/15/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%BA%8C/">Vue2源码解析二</a><a class="next" href="/2021/04/08/AntV-L7%E4%B8%AD%E7%94%BB%E4%B8%80%E4%B8%AA%E6%8C%87%E5%AE%9A%E8%B7%9D%E7%A6%BB%E7%9A%84%E5%9C%86/">AntV-L7中画一个指定距离的圆</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify=!1,verify=!1,GUEST_INFO=["nick","mail","link"],guest_info="nick,mail,link".split(",").filter(function(i){return-1<GUEST_INFO.indexOf(i)});guest_info=0==guest_info.length?GUEST_INFO:guest_info,window.valine=new Valine({el:"#vcomment",notify:notify,verify:verify,appId:"I3xP7RQ9tkxTDanFl9uqQVz5-gzGzoHsz",appKey:"ES3vn5QS7Nr60OgnmwKqCkv9",placeholder:"写点什么吧",avatar:"retro",guest_info:guest_info,pageSize:"10"})</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"><input type="hidden" name="si" value="https://yongmaple.com"><input name="tn" type="hidden" value="bds"><input name="cl" type="hidden" value="3"><input name="ct" type="hidden" value="2097152"><input name="s" type="hidden" value="on"></form></div><div class="widget"><div class="widget-title"> <i class="fa fa-folder-o">分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E4%BB%96/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%80%9D%E7%BB%B4/">思维</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%A5%E9%94%99/">报错</a></li></ul></div><div class="widget"><div class="widget-title"> <i class="fa fa-star-o">标签</i></div><div class="tagcloud"><a href="/tags/AntD/" style="font-size:15px">AntD</a> <a href="/tags/AntV/" style="font-size:15px">AntV</a> <a href="/tags/L7/" style="font-size:15px">L7</a> <a href="/tags/Atom/" style="font-size:15px">Atom</a> <a href="/tags/eslint/" style="font-size:15px">eslint</a> <a href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" style="font-size:15px">开发工具</a> <a href="/tags/%E9%85%8D%E7%BD%AE/" style="font-size:15px">配置</a> <a href="/tags/css/" style="font-size:15px">css</a> <a href="/tags/Oh-My-ZSH/" style="font-size:15px">Oh-My-ZSH</a> <a href="/tags/CentOS/" style="font-size:15px">CentOS</a> <a href="/tags/egg-js/" style="font-size:15px">egg.js</a> <a href="/tags/redis/" style="font-size:15px">redis</a> <a href="/tags/Cesium/" style="font-size:15px">Cesium</a> <a href="/tags/ES6/" style="font-size:15px">ES6</a> <a href="/tags/ESlint/" style="font-size:15px">ESlint</a> <a href="/tags/title/" style="font-size:15px">title</a> <a href="/tags/ios/" style="font-size:15px">ios</a> <a href="/tags/%E6%89%8B%E6%9C%BA%E7%AB%AF/" style="font-size:15px">手机端</a> <a href="/tags/JavaScript/" style="font-size:15px">JavaScript</a> <a href="/tags/JS/" style="font-size:15px">JS</a> <a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size:15px">基础</a> <a href="/tags/%E8%BD%AC%E6%8D%A2/" style="font-size:15px">转换</a> <a href="/tags/%E5%8F%82%E6%95%B0/" style="font-size:15px">参数</a> <a href="/tags/forEach/" style="font-size:15px">forEach</a> <a href="/tags/map/" style="font-size:15px">map</a> <a href="/tags/includes/" style="font-size:15px">includes</a> <a href="/tags/indexOf/" style="font-size:15px">indexOf</a> <a href="/tags/%E6%95%B0%E7%BB%84/" style="font-size:15px">数组</a> <a href="/tags/%E6%8B%BC%E6%8E%A5/" style="font-size:15px">拼接</a> <a href="/tags/match/" style="font-size:15px">match</a> <a href="/tags/exec/" style="font-size:15px">exec</a> <a href="/tags/%E6%AD%A3%E5%88%99/" style="font-size:15px">正则</a> <a href="/tags/sort/" style="font-size:15px">sort</a> <a href="/tags/%E6%AF%94%E8%BE%83/" style="font-size:15px">比较</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size:15px">排序</a> <a href="/tags/%E6%BA%90%E4%BB%A3%E7%A0%81%E6%9F%A5%E7%9C%8B/" style="font-size:15px">源代码查看</a> <a href="/tags/nodejs/" style="font-size:15px">nodejs</a> <a href="/tags/Mac/" style="font-size:15px">Mac</a> <a href="/tags/%E8%BE%93%E5%85%A5%E6%B3%95/" style="font-size:15px">输入法</a> <a href="/tags/mongodb/" style="font-size:15px">mongodb</a> <a href="/tags/mongoose/" style="font-size:15px">mongoose</a> <a href="/tags/%E6%8A%A5%E9%94%99/" style="font-size:15px">报错</a> <a href="/tags/React/" style="font-size:15px">React</a> <a href="/tags/nextTick/" style="font-size:15px">nextTick</a> <a href="/tags/hooks/" style="font-size:15px">hooks</a> <a href="/tags/Menu/" style="font-size:15px">Menu</a> <a href="/tags/%E9%80%82%E9%85%8D/" style="font-size:15px">适配</a> <a href="/tags/Retina/" style="font-size:15px">Retina</a> <a href="/tags/Vim/" style="font-size:15px">Vim</a> <a href="/tags/Vite/" style="font-size:15px">Vite</a> <a href="/tags/Vue/" style="font-size:15px">Vue</a> <a href="/tags/%E6%89%8B%E6%92%95%E6%BA%90%E7%A0%81/" style="font-size:15px">手撕源码</a> <a href="/tags/Vue3/" style="font-size:15px">Vue3</a> <a href="/tags/websocket/" style="font-size:15px">websocket</a> <a href="/tags/vue-router/" style="font-size:15px">vue-router</a> <a href="/tags/vuex/" style="font-size:15px">vuex</a> <a href="/tags/mysql/" style="font-size:15px">mysql</a> <a href="/tags/navicat/" style="font-size:15px">navicat</a> <a href="/tags/iOS/" style="font-size:15px">iOS</a> <a href="/tags/iTerm2/" style="font-size:15px">iTerm2</a> <a href="/tags/%E9%94%AE%E7%9B%98/" style="font-size:15px">键盘</a> <a href="/tags/this/" style="font-size:15px">this</a> <a href="/tags/vscode/" style="font-size:15px">vscode</a> <a href="/tags/webpack/" style="font-size:15px">webpack</a> <a href="/tags/host/" style="font-size:15px">host</a> <a href="/tags/MongoDB/" style="font-size:15px">MongoDB</a> <a href="/tags/android%E6%A8%A1%E6%8B%9F%E5%99%A8/" style="font-size:15px">android模拟器</a> <a href="/tags/webview/" style="font-size:15px">webview</a> <a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size:15px">微信</a> <a href="/tags/translate3d/" style="font-size:15px">translate3d</a> <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D/" style="font-size:15px">移动端适配</a> <a href="/tags/%E7%BF%BB%E8%AF%91/" style="font-size:15px">翻译</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size:15px">设计模式</a></div></div><div class="widget"><div class="widget-title"> <i class="fa fa-file-o">最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/04/21/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%B8%89/">Vue2源码解析三</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/15/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E4%BA%8C/">Vue2源码解析二</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/13/Vue2%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">Vue2源码解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/08/AntV-L7%E4%B8%AD%E7%94%BB%E4%B8%80%E4%B8%AA%E6%8C%87%E5%AE%9A%E8%B7%9D%E7%A6%BB%E7%9A%84%E5%9C%86/">AntV-L7中画一个指定距离的圆</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/07/%E6%89%8B%E5%86%99Vue/">手写Vue</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/01/Vue%E5%85%A8%E5%AE%B6%E6%A1%B6&%E5%8E%9F%E7%90%86/">Vue全家桶&原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/30/Vite2%E5%B7%A5%E7%A8%8B%E5%8C%96/">Vite2工程化</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/29/React%E4%B8%AD%E7%9A%84nextTick/">React中的nextTick</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/29/Vue%E5%92%8CReact%E6%AF%94%E8%BE%83/">Vue和React设计思路</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/27/%E8%AE%BE%E7%BD%AEiTerm2%E5%85%8D%E5%AF%86%E7%99%BB%E9%99%86ssh%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8/">设置iTerm2免密登陆ssh远程服务器</a></li></ul></div><div class="widget"><div class="widget-title"> <i class="fa fa-external-link">友情链接</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">大枫.</a> <a rel="nofollow" target="_blank" href="https://hexo.io">驱动 Hexo.</a> <a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo">主题 maupassant.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>